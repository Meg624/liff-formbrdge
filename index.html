<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Loading...</title>
  <script src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
  <style>
    body {
      background-color: #06C755;
      margin: 0;
      height: 100vh;
    }
  </style>
</head>
<body>
  <script>
    const LIFF_ID = "2008019087-kwZKsT3i";
    const FORMBRIDGE_URL = "https://a1df22ff.form.kintoneapp.com/public/adeadd451913848c81783ab52470a69da29926e802cdda7b02ca55d317c4e408";

    liff.init({ liffId: LIFF_ID })
      .then(() => {
        alert("init完了 / ログイン状態: " + liff.isLoggedIn());

        if (!liff.isLoggedIn()) {
          liff.login({ redirectUri: "https://Meg624.github.io/liff-formbrdge/" });
          return;
        }
        return liff.getProfile();
      })
      .then((profile) => {
        if (!profile) return;
        alert("UID: " + profile.userId);
        .then((profile) => {
  if (!profile) return;
  const uid = profile.userId;
  const url = FORMBRIDGE_URL + "?line_uid=" + uid;
  alert("リダイレクト先: " + url); // 確認用
  liff.openWindow({
    url: url,
    external: false
  });
})
      })
      .catch((err) => {
        alert("エラー: " + err.message);
      });
  </script>
</body>
</html>

